<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 08 - Assets Example | Komodo Documentation</title>
    <meta name="description" content="Documentation for developers building on Komodo">
    <link rel="icon" href="komodo-logo-icon-black.png">
    <link rel="preload" href="/assets/css/0.styles.edc0cc79.css" as="style"><link rel="preload" href="/assets/js/app.38351d9b.js" as="script"><link rel="preload" href="/assets/js/2.c8a0d3c8.js" as="script"><link rel="preload" href="/assets/js/68.b91c304c.js" as="script"><link rel="prefetch" href="/assets/js/10.09ca6c5e.js"><link rel="prefetch" href="/assets/js/100.ae2a8793.js"><link rel="prefetch" href="/assets/js/101.7dcd3f07.js"><link rel="prefetch" href="/assets/js/102.b60e2e33.js"><link rel="prefetch" href="/assets/js/103.c1b77490.js"><link rel="prefetch" href="/assets/js/104.de33587c.js"><link rel="prefetch" href="/assets/js/105.5abeb2bd.js"><link rel="prefetch" href="/assets/js/106.4c4dbae5.js"><link rel="prefetch" href="/assets/js/107.ec4c709e.js"><link rel="prefetch" href="/assets/js/108.94e187ff.js"><link rel="prefetch" href="/assets/js/109.341ac117.js"><link rel="prefetch" href="/assets/js/11.e5ecf252.js"><link rel="prefetch" href="/assets/js/110.5f7abce1.js"><link rel="prefetch" href="/assets/js/111.6989ac0c.js"><link rel="prefetch" href="/assets/js/112.487d9d33.js"><link rel="prefetch" href="/assets/js/113.08302549.js"><link rel="prefetch" href="/assets/js/114.3fc2f57d.js"><link rel="prefetch" href="/assets/js/115.d04ed361.js"><link rel="prefetch" href="/assets/js/116.25daa067.js"><link rel="prefetch" href="/assets/js/117.3859f452.js"><link rel="prefetch" href="/assets/js/118.11404bc3.js"><link rel="prefetch" href="/assets/js/119.5473dead.js"><link rel="prefetch" href="/assets/js/12.e5aa6c57.js"><link rel="prefetch" href="/assets/js/120.df23fc34.js"><link rel="prefetch" href="/assets/js/121.bd41e894.js"><link rel="prefetch" href="/assets/js/122.fe04273c.js"><link rel="prefetch" href="/assets/js/123.4bccb386.js"><link rel="prefetch" href="/assets/js/124.23fa83b6.js"><link rel="prefetch" href="/assets/js/125.93316e17.js"><link rel="prefetch" href="/assets/js/126.c619fa5e.js"><link rel="prefetch" href="/assets/js/127.3a1c0bf6.js"><link rel="prefetch" href="/assets/js/128.e01fdc79.js"><link rel="prefetch" href="/assets/js/129.fc16d432.js"><link rel="prefetch" href="/assets/js/13.6d6eac57.js"><link rel="prefetch" href="/assets/js/130.2a334e71.js"><link rel="prefetch" href="/assets/js/131.276dbc45.js"><link rel="prefetch" href="/assets/js/132.85d8244c.js"><link rel="prefetch" href="/assets/js/133.2ae3624e.js"><link rel="prefetch" href="/assets/js/134.eb9b218c.js"><link rel="prefetch" href="/assets/js/135.9caf9981.js"><link rel="prefetch" href="/assets/js/136.c44f8bd7.js"><link rel="prefetch" href="/assets/js/137.ebdcf72c.js"><link rel="prefetch" href="/assets/js/138.e1e1030d.js"><link rel="prefetch" href="/assets/js/139.32195aa5.js"><link rel="prefetch" href="/assets/js/14.b60491a7.js"><link rel="prefetch" href="/assets/js/140.0bb8c57a.js"><link rel="prefetch" href="/assets/js/141.52525ccf.js"><link rel="prefetch" href="/assets/js/142.62498bf0.js"><link rel="prefetch" href="/assets/js/143.97359d27.js"><link rel="prefetch" href="/assets/js/144.8221c1e6.js"><link rel="prefetch" href="/assets/js/145.ea5af076.js"><link rel="prefetch" href="/assets/js/146.41f9dc80.js"><link rel="prefetch" href="/assets/js/147.06deb599.js"><link rel="prefetch" href="/assets/js/148.b0f6cb6b.js"><link rel="prefetch" href="/assets/js/149.f9a2fd0a.js"><link rel="prefetch" href="/assets/js/15.babc44a9.js"><link rel="prefetch" href="/assets/js/150.54b2c270.js"><link rel="prefetch" href="/assets/js/151.6efe884b.js"><link rel="prefetch" href="/assets/js/152.27e56738.js"><link rel="prefetch" href="/assets/js/153.6d598cac.js"><link rel="prefetch" href="/assets/js/154.e1d7aafc.js"><link rel="prefetch" href="/assets/js/155.9d477edd.js"><link rel="prefetch" href="/assets/js/156.7533f269.js"><link rel="prefetch" href="/assets/js/157.140c5793.js"><link rel="prefetch" href="/assets/js/16.1fcc982c.js"><link rel="prefetch" href="/assets/js/17.d2f5520e.js"><link rel="prefetch" href="/assets/js/18.86adf91b.js"><link rel="prefetch" href="/assets/js/19.23238cf5.js"><link rel="prefetch" href="/assets/js/20.cef30440.js"><link rel="prefetch" href="/assets/js/21.2133cf30.js"><link rel="prefetch" href="/assets/js/22.a034125f.js"><link rel="prefetch" href="/assets/js/23.48a6b7ab.js"><link rel="prefetch" href="/assets/js/24.9b498c1b.js"><link rel="prefetch" href="/assets/js/25.adabf1f4.js"><link rel="prefetch" href="/assets/js/26.2f1d1daa.js"><link rel="prefetch" href="/assets/js/27.349cac7d.js"><link rel="prefetch" href="/assets/js/28.81f9ac87.js"><link rel="prefetch" href="/assets/js/29.1101dc26.js"><link rel="prefetch" href="/assets/js/3.2fd6f943.js"><link rel="prefetch" href="/assets/js/30.3a58af0f.js"><link rel="prefetch" href="/assets/js/31.21bb1c92.js"><link rel="prefetch" href="/assets/js/32.6ae225f7.js"><link rel="prefetch" href="/assets/js/33.7cf60c95.js"><link rel="prefetch" href="/assets/js/34.ee16d5a1.js"><link rel="prefetch" href="/assets/js/35.0ccad417.js"><link rel="prefetch" href="/assets/js/36.d068b2ef.js"><link rel="prefetch" href="/assets/js/37.466be39f.js"><link rel="prefetch" href="/assets/js/38.0d2589bb.js"><link rel="prefetch" href="/assets/js/39.a5d6b192.js"><link rel="prefetch" href="/assets/js/4.3b529539.js"><link rel="prefetch" href="/assets/js/40.ae57ea7b.js"><link rel="prefetch" href="/assets/js/41.3ce7bf23.js"><link rel="prefetch" href="/assets/js/42.078f5aea.js"><link rel="prefetch" href="/assets/js/43.38b25014.js"><link rel="prefetch" href="/assets/js/44.97e0c1a7.js"><link rel="prefetch" href="/assets/js/45.30048475.js"><link rel="prefetch" href="/assets/js/46.c1f075fd.js"><link rel="prefetch" href="/assets/js/47.d0ed0999.js"><link rel="prefetch" href="/assets/js/48.c0be7d4c.js"><link rel="prefetch" href="/assets/js/49.f5a10a09.js"><link rel="prefetch" href="/assets/js/5.5f30dec9.js"><link rel="prefetch" href="/assets/js/50.b5dfd223.js"><link rel="prefetch" href="/assets/js/51.023290f6.js"><link rel="prefetch" href="/assets/js/52.6cd7a3c9.js"><link rel="prefetch" href="/assets/js/53.dbe1b02a.js"><link rel="prefetch" href="/assets/js/54.14184f80.js"><link rel="prefetch" href="/assets/js/55.4c8526a5.js"><link rel="prefetch" href="/assets/js/56.2979048a.js"><link rel="prefetch" href="/assets/js/57.ea01f1eb.js"><link rel="prefetch" href="/assets/js/58.3bb62bf0.js"><link rel="prefetch" href="/assets/js/59.f1154483.js"><link rel="prefetch" href="/assets/js/6.8dd10eb6.js"><link rel="prefetch" href="/assets/js/60.23bb7cc0.js"><link rel="prefetch" href="/assets/js/61.d4c9d28e.js"><link rel="prefetch" href="/assets/js/62.c8a46bd4.js"><link rel="prefetch" href="/assets/js/63.2f958ca8.js"><link rel="prefetch" href="/assets/js/64.14a38dda.js"><link rel="prefetch" href="/assets/js/65.e484300c.js"><link rel="prefetch" href="/assets/js/66.9a3d09ab.js"><link rel="prefetch" href="/assets/js/67.58c8b927.js"><link rel="prefetch" href="/assets/js/69.078a6bb3.js"><link rel="prefetch" href="/assets/js/7.65b77aed.js"><link rel="prefetch" href="/assets/js/70.66087a96.js"><link rel="prefetch" href="/assets/js/71.567d55b1.js"><link rel="prefetch" href="/assets/js/72.827e5877.js"><link rel="prefetch" href="/assets/js/73.d62f4b8b.js"><link rel="prefetch" href="/assets/js/74.d59c5131.js"><link rel="prefetch" href="/assets/js/75.d25128de.js"><link rel="prefetch" href="/assets/js/76.9043f4fb.js"><link rel="prefetch" href="/assets/js/77.188eb6ff.js"><link rel="prefetch" href="/assets/js/78.a05f49c9.js"><link rel="prefetch" href="/assets/js/79.510a13d0.js"><link rel="prefetch" href="/assets/js/8.8aa8e600.js"><link rel="prefetch" href="/assets/js/80.e634a7fa.js"><link rel="prefetch" href="/assets/js/81.20b6693b.js"><link rel="prefetch" href="/assets/js/82.e3c128d2.js"><link rel="prefetch" href="/assets/js/83.a5fec384.js"><link rel="prefetch" href="/assets/js/84.7a816aa5.js"><link rel="prefetch" href="/assets/js/85.b1c24cb9.js"><link rel="prefetch" href="/assets/js/86.3c467fcd.js"><link rel="prefetch" href="/assets/js/87.a42153c7.js"><link rel="prefetch" href="/assets/js/88.acc38634.js"><link rel="prefetch" href="/assets/js/89.cbea9034.js"><link rel="prefetch" href="/assets/js/9.f2a5062a.js"><link rel="prefetch" href="/assets/js/90.dace1e32.js"><link rel="prefetch" href="/assets/js/91.d02982ae.js"><link rel="prefetch" href="/assets/js/92.9f310312.js"><link rel="prefetch" href="/assets/js/93.fe7f769c.js"><link rel="prefetch" href="/assets/js/94.ca42ed7c.js"><link rel="prefetch" href="/assets/js/95.06f96925.js"><link rel="prefetch" href="/assets/js/96.92e8a0e3.js"><link rel="prefetch" href="/assets/js/97.18a473b7.js"><link rel="prefetch" href="/assets/js/98.16d345eb.js"><link rel="prefetch" href="/assets/js/99.3a6d264b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.edc0cc79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/komodo-logo-icon-black.png" alt="Komodo Documentation" class="logo"> <span class="site-name can-hide">Komodo Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/komodo/installation.html" class="nav-link">Komodo</a></li><li class="dropdown-item"><!----> <a href="/assetchains/beginner-vps-linux.html" class="nav-link">Asset Chains</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li></ul></div></div><div class="nav-item"><a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></div><div class="nav-item"><a href="/gui/agama/introduction.html" class="nav-link">Agama</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/komodo/installation.html" class="nav-link">Komodo</a></li><li class="dropdown-item"><!----> <a href="/assetchains/beginner-vps-linux.html" class="nav-link">Asset Chains</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li></ul></div></div><div class="nav-item"><a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></div><div class="nav-item"><a href="/gui/agama/introduction.html" class="nav-link">Agama</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/cc-jl/introduction.html" class="sidebar-link">How to write UTXO based CC modules for KMD based chains - by jl777</a></li><li><a href="/cc-jl/chapter00.html" class="sidebar-link">Chapter 00 - Bitcoin Protocol Basics</a></li><li><a href="/cc-jl/chapter01.html" class="sidebar-link">Chapter 01 - OP_CHECKCRYPTOCONDITION</a></li><li><a href="/cc-jl/chapter02.html" class="sidebar-link">Chapter 02 - CC Contract Basics</a></li><li><a href="/cc-jl/chapter03.html" class="sidebar-link">Chapter 03 - CC vins and vouts</a></li><li><a href="/cc-jl/chapter04.html" class="sidebar-link">Chapter 04 - CC RPC Extensions</a></li><li><a href="/cc-jl/chapter05.html" class="sidebar-link">Chapter 05 - CC Validation</a></li><li><a href="/cc-jl/chapter06.html" class="sidebar-link">Chapter 06 - Faucet Example</a></li><li><a href="/cc-jl/chapter07.html" class="sidebar-link">Chapter 07 - Rewards Example</a></li><li><a href="/cc-jl/chapter08.html" class="active sidebar-link">Chapter 08 - Assets Example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#create" class="sidebar-link">create</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#transfer" class="sidebar-link">transfer</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#buyoffer" class="sidebar-link">buyoffer</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#cancelbuy" class="sidebar-link">cancelbuy</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#fillbuy" class="sidebar-link">fillbuy</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#selloffer" class="sidebar-link">selloffer</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#cancel" class="sidebar-link">cancel</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter08.html#fillsell" class="sidebar-link">fillsell</a></li></ul></li><li><a href="/cc-jl/chapter09.html" class="sidebar-link">Chapter 09 - Dice Example</a></li><li><a href="/cc-jl/chapter10.html" class="sidebar-link">Chapter 10 - Channels Example</a></li><li><a href="/cc-jl/chapter11.html" class="sidebar-link">Chapter 11 - Oracles Example</a></li><li><a href="/cc-jl/chapter12.html" class="sidebar-link">Chapter 12 - Limitless Possibilities</a></li><li><a href="/cc-jl/chapter13.html" class="sidebar-link">Chapter 13 - Different Languages</a></li><li><a href="/cc-jl/chapter14.html" class="sidebar-link">Chapter 14 - Runtime Bindings</a></li><li><a href="/cc-jl/chapter15.html" class="sidebar-link">Chapter 15 - RPC based dAPPS</a></li><li><a href="/cc-jl/faq.html" class="sidebar-link">Frequently asked Questions</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="chapter-08-assets-example"><a href="#chapter-08-assets-example" aria-hidden="true" class="header-anchor">#</a> Chapter 08 - Assets Example</h1> <p>In some respects the assets CC is the most complex, it was actually the first one that I coded. It is however using a simple model, even for the DEX functions, so while it is quite involved, it does not have the challenge/response complexity of dice.</p> <p>There are two major aspects to creating tokens. First is to create and track it, down to every specific satoshi. The second is solving how to implement DEX functions of trading assets.</p> <p>The model used is &quot;colored coins&quot;. This means that the token creating txid issues the assets as denoted by all the satoshis, so locking 1 COIN issues 100 million tokens. This multiplication will allow creation of plenty of assets. We want to preserve all the tokens created across all allowed operations. The way this is achieved is that all operations attaches the token creation <code>txid</code> in its <code>OP_RETURN</code>, along with the specified operation.</p> <p>Ownership of tokens are represented by the colored satoshis in the CC address for the user's <code>pubkey</code>. This allows using the standard utxo system to automatically track ownership of the tokens. This automatic inheritance is one of the big advantages of utxo CC contracts that compensates for the slightly more work needed to implement a CC contract.</p> <p>So now we have the standard CC addresss, list and info commands that provide the CC addresses, list of all tokens and info on specific tokens and the ability to create and transfer tokens. Any amount of tokens can be created from 1 to very large numbers and using standard <code>addressbalance</code>, <code>addressutxo</code> type of commands, the details of all assets owned can be determined for a specific pubkey.</p> <p>Now we can solve the DEX part of the tokenization, which turns out to be much simpler than initially imagined. We start with bidding for a specific token. Funds for the <code>bid</code> are locked into the global CC address, along with the desired token and price. This creates a <code>bid</code> utxo that is able to be listed via an orderbook rpc call. To fill the <code>bid</code>, a specific <code>bid</code> utxo is spent with the appropriate number of assets and change and updated price for the unfilled amount. if the entire amount is filled, then it wont appear in the orderbook anymore.</p> <p><code>asks</code> work by locking assets along with the required price. Partial fills can be supported and the rpc calls can mask the utxo-ness of the funds/assets needed by automatically gathering the required amount of funds to fill the specific amount.</p> <p>With calls to cancel the pending <code>bid</code> or <code>ask</code>, we get a complete set of rpc calls that can support a COIN-centric DEX.</p> <p>In the future, it is expected that a token swap rpc can be supported to allow directly swapping one token for another, but at first it is expected that there wont be sufficient volumes for such token to token swaps, so it was left out of the initial implementation.</p> <p>With just these rpc calls and associated validation, we get the ability to issue tokens and trade them on a DEX!</p> <h2 id="create"><a href="#create" aria-hidden="true" class="header-anchor">#</a> create</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vout.0: issuance assetoshis to CC
vout.1: tag sent to normal address of AssetsCCaddress
vout.2: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span> <span class="token string">&quot;&lt;assetname&gt;&quot;</span> <span class="token string">&quot;&lt;description&gt;&quot;</span>
</code></pre></div><h2 id="transfer"><a href="#transfer" aria-hidden="true" class="header-anchor">#</a> transfer</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1 <span class="token punctuation">..</span> vin.n-1: valid CC outputs
vout.0 to n-2: assetoshis output to CC
vout.n-2: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'t'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span>
</code></pre></div><h2 id="buyoffer"><a href="#buyoffer" aria-hidden="true" class="header-anchor">#</a> buyoffer</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vins.*: normal inputs <span class="token punctuation">(</span>bid + change<span class="token punctuation">)</span>
vout.0: amount of bid to unspendable
vout.1: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span> <span class="token punctuation">[</span>amount of asset required<span class="token punctuation">]</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
</code></pre></div><h2 id="cancelbuy"><a href="#cancelbuy" aria-hidden="true" class="header-anchor">#</a> cancelbuy</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: unspendable.<span class="token punctuation">(</span>vout.0 from buyoffer<span class="token punctuation">)</span> buyTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>
vout.0: vin.1 value to original pubkey buyTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.nValue -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
vout.1: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'o'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span>
</code></pre></div><h2 id="fillbuy"><a href="#fillbuy" aria-hidden="true" class="header-anchor">#</a> fillbuy</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: unspendable.<span class="token punctuation">(</span>vout.0 from buyoffer<span class="token punctuation">)</span> buyTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>
vin.2+: valid CC output satisfies buyoffer <span class="token punctuation">(</span>*tx.vin<span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>nValue
vout.0: remaining amount of bid to unspendable
vout.1: vin.1 value to signer of vin.2
vout.2: vin.2 assetoshis to original pubkey
vout.3: CC output <span class="token keyword">for</span> assetoshis change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.4: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span> <span class="token punctuation">[</span>remaining asset required<span class="token punctuation">]</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
</code></pre></div><h2 id="selloffer"><a href="#selloffer" aria-hidden="true" class="header-anchor">#</a> selloffer</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1+: valid CC output <span class="token keyword">for</span> sale
vout.0: vin.1 assetoshis output to CC to unspendable
vout.1: CC output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.2: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'s'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span> <span class="token punctuation">[</span>amount of native coin required<span class="token punctuation">]</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
</code></pre></div><h2 id="cancel"><a href="#cancel" aria-hidden="true" class="header-anchor">#</a> cancel</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: unspendable.<span class="token punctuation">(</span>vout.0 from exchange or selloffer<span class="token punctuation">)</span> sellTx/exchangeTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span> inputTx
vout.0: vin.1 assetoshis to original pubkey CC sellTx/exchangeTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.nValue -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
vout.1: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span>
</code></pre></div><h2 id="fillsell"><a href="#fillsell" aria-hidden="true" class="header-anchor">#</a> fillsell</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: unspendable.<span class="token punctuation">(</span>vout.0 assetoshis from selloffer<span class="token punctuation">)</span> sellTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>
vin.2+: normal output that satisfies selloffer <span class="token punctuation">(</span>*tx.vin<span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>nValue
vout.0: remaining assetoshis -<span class="token operator">&gt;</span> unspendable
vout.1: vin.1 assetoshis to signer of vin.2 sellTx.vout<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.nValue -<span class="token operator">&gt;</span> any
vout.2: vin.2 value to original pubkey <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
vout.3: CC asset <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.4: CC asset2 <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span> <span class="token string">'E'</span> only
vout.5: normal output <span class="token keyword">for</span> change <span class="token punctuation">(</span>if any<span class="token punctuation">)</span>
vout.n-1: opreturn <span class="token punctuation">[</span>EVAL_ASSETS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'S'</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>assetid<span class="token punctuation">]</span> <span class="token punctuation">[</span>amount of coin still required<span class="token punctuation">]</span> <span class="token punctuation">[</span>origpubkey<span class="token punctuation">]</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/komodoplatform/Documentation/edit/master/docs/cc-jl/chapter08.md" target="_blank" rel="noopener noreferrer">Suggest an improvement for this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cc-jl/chapter07.html" class="prev">
          Chapter 07 - Rewards Example
        </a></span> <span class="next"><a href="/cc-jl/chapter09.html">
          Chapter 09 - Dice Example
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38351d9b.js" defer></script><script src="/assets/js/2.c8a0d3c8.js" defer></script><script src="/assets/js/68.b91c304c.js" defer></script>
  </body>
</html>
